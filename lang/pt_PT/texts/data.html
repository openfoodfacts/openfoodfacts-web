<h1 class="emphasized-title">Dados</h1>

<h2 class="emphasized-title">Condições de reutilização</h2>
<p>A base de dados do Open Food Facts está disponível sob a <a href="https://opendatacommons.org/licenses/odbl/1.0/">Licença Open Database</a>.<br/> Os conteúdos individuais da base de dados estão disponíveis sob a <a href="https://opendatacommons.org/licenses/dbcl/1.0/">Licença Database Contents</a>.<br/> As imagens dos produtos estão disponíveis sob a <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">Licença Creative Commons Atribuição-CompartilhaIgual</a>.
Estas podem conter elementos gráficos sujeitos a direitos de autor ou outros direitos, que em alguns casos podem ser reproduzidos (direitos de citação ou uso razoável/fair use).</p>

<p>Por favor, leia os <a href="https://world-pt.openfoodfacts.org/termos-de-utilizacao">Termos e condições de uso e reutilização</a> antes de reutilizar os dados.</p>


<h2 class="emphasized-title">Fale-nos da sua reutilização</h2>
<p>Estamos muito interessados ​​em saber para que servem os dados do Open Food Facts. Não é obrigatório, mas gostaríamos muito que nos <a href="mailto:reuse@openfoodfacts.org?subject=Open%20Food%20Facts%20Data%20reuse">dissesse quais são as suas reutilizações</a> para que as possamos partilhar com a comunidade do Open Food Facts. Também pode <a href="https://forms.gle/hwaeqBfs8ywwhbTg8">preencher este formulário</a> para ter a oportunidade de ter a sua aplicação em destaque.</p>

<h2 class="emphasized-title">Exportação de dados abertos do Open Food Facts</h2>

<p>São geradas todas as noites dumps e exportações da base de dados. A base de dados é muito grande, mas pode encontrar <a href="https://wiki.openfoodfacts.org/Reusing_Open_Food_Facts_Data">várias formas diferentes de usar os dados</a>, dependendo do tipo de exportação.</p>

<p>As informações sobre os diferentes campos para o dump do MongoDB e as exportações de CSV estão disponíveis em <a href="https://static.openfoodfacts.org/data/data-fields.txt">https://world.openfoodfacts.org/data/data-fields.txt </a></p>

<h3>Dump MongoDB</h3>

<p>Os dados de todos os produtos estão disponíveis num dump da base de dados MongoDB.</p>
<dl>
 <dt>Hiperligação</dt>
 <dd><a href="https://static.openfoodfacts.org/data/openfoodfacts-mongodbdump.gz">https://static.openfoodfacts.org/data/openfoodfacts-mongodbdump.gz</a></dd>
 <dt>sha256sum</dt>
 <dd><a href="https://static.openfoodfacts.org/data/gz-sha256sum">https://static.openfoodfacts.org/data/gz-sha256sum</a></dd>
 <dt>md5sum</dt>
 <dd><a href="https://static.openfoodfacts.org/data/gz-md5sum">https://static.openfoodfacts.org/data/gz-md5sum</a></dd>
</dl>

<h4>Exportação delta</h4>

<p>Estão disponíveis as exportações diárias de delta dos últimos 14 dias. A lista de ficheiros delta atualmente disponíveis pode ser consultada em <a href="https://static.openfoodfacts.org/data/delta/index.txt">https://static.openfoodfacts.org/data/delta/index.txt</a>.</p>
<p>Cada linha representa um ficheiro que está disponível em <code>https://static.openfoodfacts.org/data/delta/{filename}</code>.</p>
<p>O nome do ficheiro contém o carimbo de data/hora UNIX da primeira e da última alteração contida no ficheiro JSON, para que os ficheiros delta possam ser importados (após a extração) com <code>mongoimport</code> em ordem alfabética.</p>
<p>Por favor, note que, devido à natureza do <code>mongoexport</code>, os ficheiros delta não podem informá-lo sobre os produtos eliminados. Para remover produtos eliminados da sua base de dados, terá de importar o dump completo do MongoDB.</p>

<h3>Exportação de dados JSONL</h3>

<p>Toda a base de dados está também disponível no formato <a href="https://jsonlines.org/">JSONL</a> (por vezes chamado de LDJSON ou NDJSON), onde cada linha é um objeto JSON. Representa os mesmos dados que a exportação MongoDB. O ficheiro é comprimido com gzip.</p>

<dl>
 <dt>Hiperligação</dt>
 <dd><a href="https://static.openfoodfacts.org/data/openfoodfacts-products.jsonl.gz">https://static.openfoodfacts.org/data/openfoodfacts-products.jsonl.gz</a>
 </dd>
</dl>

<p>Uma forma adequada de explorar a base de dados é usar o DuckDB, uma ferramenta analítica em processo projetada para processar grandes quantidades de dados em uma fração de segundos. Poder ler <a href="https://blog.openfoodfacts.org/en/news/food-transparency-in-the-palm-of-your-hand-explore-the-largest-open-food-database-using-duckdb-%f0%9f%a6%86x%f0%9f%8d%8a">esta publicação</a> no nosso blogue onde explicamos como explorar e processar a base de dados do Open Food Facts com DuckDB</p>

<h3>Exportação de dados do Parquet no Hugging Face</h3>

<p>Também está disponível uma versão simplificada do dump JSONL no <a href="https://parquet.apache.org/">formato Parquet</a>. Durante a conversão, filtramos colunas que contêm informações duplicadas, são usadas para depuração interna ou são simplesmente irrelevantes para os utilizadores.</p>
    
<p>O formato Parquet revelou-se útil:</p> 

<ul>
<li>Data is organized by column, rather than by row, which saves storage space and speeds up analytics queries, i.e. you can select just the columns you care about, optimizing query performances, even on entry-level computers.</li>
<li>Highly efficient data compression and decompression, making it good for storing and sharing big datasets of any kind,</li>
<li>Supports complex data types and advanced nested data structures.</li>
</ul>

<p>The dataset is available on <a href="https://huggingface.co/datasets/openfoodfacts/product-database">Hugging Face</a>, a collaborative Machine Learning ecosystem where developers and researchers can share models and datasets.</p>

<dl>
 <dt>Hiperligação</dt>
 <dd><a href="https://huggingface.co/datasets/openfoodfacts/product-database/resolve/main/food.parquet?download=true">https://huggingface.co/datasets/openfoodfacts/product-database/resolve/main/food.parquet?download=true</a>
 </dd>
</dl>

<p>Find more information in the <a href="https://wiki.openfoodfacts.org/Reusing_Open_Food_Facts_Data#Parquet_file_hosted_on_Hugging_Face_.28beta.29">Wiki</a>, including guidelines for data reuse and example queries to get started.</p>

<h3>Exportação de dados CSV</h3>
<p>Os dados relativos a todos os produtos, ou a alguns dos produtos, podem ser descarregados no formato CSV (legível com o LibreOffice, Excel e muitos outros programas de folha de cálculo) através do <a href="https://world.openfoodfacts.org/cgi/search.pl">formulário de pesquisa avançada</a>.</p>

<dl>
 <dt>Hiperligações</dt>
 <dd>Alimentos: <a href="https://static.openfoodfacts.org/data/en.openfoodfacts.org.products.csv.gz">https://static.openfoodfacts.org/data/en.openfoodfacts.org.products.csv.gz</a> (CSV comprimido no formato GZIP: ~ 0,9 Gb, descomprimido: ~ 9 Gb)</dd>
 <dd>Cosméticos: <a href="https://static.openbeautyfacts.org/data/en.openbeautyfacts.org.products.csv.gz">https://static.openbeautyfacts.org/data/en.openbeautyfacts.org.products.csv.gz</a></dd>
 <dd>Comida para animais: <a href="https://static.openpetfoodfacts.org/data/en.openpetfoodfacts.org.products.csv.gz">https://static.openpetfoodfacts.org/data/en.openpetfoodfacts.org.products.csv.gz</a></dd>
 <dd>Todos os outros produtos: <a href="https://static.openproductsfacts.org/data/en.openproductsfacts.org.products.csv.gz">https://static.openproductsfacts.org/data/en.openproductsfacts.org.products.csv.gz</a></dd>
</dl>

<p>A codificação do ficheiro é Unicode UTF-8. O caractere que separa os campos é &lt;tab&gt; (tabulação).</p>

<h3>Exportação de dados RDF</h3>
<p>A base de dados também está disponível no formato RDF (trata-se de uma experiência, que já não é mantida ativamente). Pode ler o <a href="https://blog.openfoodfacts.org/fr/news/des-donnees-libres-et-liees-export-rdf-des-donnees">anúncio em francês</a>.</p>

<dl>
 <dt>Hiperligação</dt>
 <dd><a href="https://world.openfoodfacts.org/data/en.openfoodfacts.org.products.rdf.gz">https://world.openfoodfacts.org/data/en.openfoodfacts.org.products.rdf.gz</a></dd>
</dl>

<h3>Exportação de imagens</h3>
<p>Todas as imagens e resultados de OCR podem ser descarregados do nosso servidor ou do AWS (através do Programa de Dados Abertos do AWS). 
<a href="https://openfoodfacts.github.io/openfoodfacts-server/api/how-to-download-images/" class="button rounded">Consulte a nossa documentação para saber mais sobre como descarregar imagens</a></p>

<h2 class="emphasized-title">Documentação OpenAPI para a API JSON</h2>
<p>Também está disponível uma API JSON para ler os dados de um produto. Esta API é utilizada, em particular, na aplicação móvel Open Food Facts.</p>
<p>Atualizamos a API periodicamente, mas garantimos a compatibilidade com versões anteriores. Por favor <a href="mailto:reuse@openfoodfacts.org?subject=Open%20Food%20Facts%20Data%20reuse">entre em contacto</a> se o utilizar, para que possamos informá-lo sobre eventuais alterações.</p>
<a href="https://openfoodfacts.github.io/openfoodfacts-server/api/" class="button rounded">Descubra a nossa API</a>

<h3 class="emphasized-title">Contribuindo para melhorar a nossa API e a documentação OpenAPI</h3>
<p>Estamos ansiosos para concluir a documentação da API, adicionar casos de uso e automatizar a geração do SDK. Se é um conhecedor da OpenAPI, será muito bem-vindo para ajudar.</p>

<p>Você é muito bem-vindo a usar a API para casos de produção, desde que 1 chamada à API = 1 verificação real por um utilizador.
Qualquer tentativa de extrair dados da base de dados utilizando a API será muito provavelmente bloqueada, uma vez que as exportações diárias completas estão disponíveis nesta mesma página.</p>
<p>Além disso, enviar um cabeçalho HTTP com a sua chamada de API é uma boa forma de entrarmos em contacto, caso surja algum problema.</p>

<h3 class="emphasized-title">XML API (não suportado)</h3>
<p>Também pode obter o resultado em XML utilizando <code>.xml</code></p>
<p>Exemplo: <a href="https://world.openfoodfacts.org/api/v2/product/737628064502.xml">https://world.openfoodfacts.org/api/v2/product/737628064502.xml</a></p>
Esta API não é mantida ativamente e não está oficialmente documentada.

<h2 class="emphasized-title">Wrappers e SDKs</h2>
<p>Provavelmente temos um wrapper para sua linguagem de programação favorita. Se o fizermos, pode usá-lo e melhorá-lo. Se não o fizermos, pode ajudar a criá-lo.</p>
<p>Permitem que consuma dados e que os utilizadores contribuam com novos dados</p>

<h3>Princípios gerais para deixar seus utilizadores satisfeitos</h3>
<ul>
<li>You can search for information about products, including many useful computed values.</li>
<li>If you can't get the information on a specific product, you can get your user to send photos and data, that will then be processed by Open Food Facts AI and contributors to get the computed result you want to show them.</li>
<li>You can also implement the complete flow so that they get immediately the result with some effort on their side.</li>
</ul>

<h3>Se os seus utilizadores esperam imediatamente um resultado (por exemplo, aplicações de nutrição)</h3>
<ul>
<li>Submit photos (front/nutrition/ingredients): most painless thing for your users</li>
<li>The Open Food Facts AI - Robotoff - will generate some derived data from the photos</li>
<li>Over time, other apps, and the Open Food Facts community will fill the data gaps</li>
</ul>

<h3>Se os seus utilizadores não esperam resultados imediatamente (por ex. aplicações de inventário)</h3>
<ul>
<li>Submit nutrition facts + category &gt; get Nutri-Score</li>
<li>Submit ingredients &gt; get the NOVA group (about food ultra-processing), additives, allergens, normalized ingredients, vegan, vegetarian&hellip;</li>
<li>Submit category + labels &gt; soon get the Eco-Score (about environmental impact)</li>
</ul>

<h3>Aplicação móvel Android / iPhone / Flutter</h3>

<p>O código para as aplicações móveis oficiais do Open Food Facts está disponível no GitHub
 <a href="https://github.com/openfoodfacts/smooth-app">Flutter</a>
 <a href="https://github.com/openfoodfacts/openfoodfacts-androidapp">Kotlin Android</a>
 <a href="https://github.com/openfoodfacts/openfoodfacts-ios">Swift iOS</a></p>

<p>Estamos a tentar transformar as bases de código Kotlin e Swift obsoletas em SDKs Kotlin e Swift. Ajuda é bem-vinda :-)</p>
<p>A aplicação permite ao utilizador ler o código de barras de produtos, visualizar as informações sobre produtos e tirar e enviar fotografias e dados de produtos em falta.</p>
<p>Está convidado a reutilizar o código (é open source) e nos ajudar a melhorá-lo, para todos, no planeta inteiro.</p>

<h3>SDKs</h3>
<!-- TODO: Install locally to get icons -->
<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">-->

            <div class="grid-x">
                <div class="cell small-12 medium-6 large-4">
                     <label for="sdkFilter">Filtrar por nome:</label>
                     <input type="text" id="sdkFilter" placeholder="p. ex., Python, Java, React...">
                </div>
            </div>


            <table class="stack hover" id="sdkTable">
                <thead>
                    <tr>
                        <th width="60">Ícone</th>
                        <th width="200" data-sortable data-column-index="1">Idioma / Framework</th>
                        <th>Recursos</th>
                        <th data-sortable data-column-index="3">Discussão</th>
                    </tr>
                </thead>
                <tbody id="sdkTableBody">
                    <tr>
                        <td data-label="Icon"><i class="devicon-cordova-plain"></i></td>
                        <td data-label="Language / Framework">Cordova (aplicação antiga)</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-cordova-app" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion">N/D</td>
                    </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-dart-plain"></i></td>
                        <td data-label="Language / Framework">DART</td>
                        <td data-label="Resources">
                            <a href="https://github.com/openfoodfacts/openfoodfacts-dart" target="_blank" rel="noopener noreferrer">GitHub</a>
                            <a href="https://pub.dev/packages/openfoodfacts" target="_blank" rel="noopener noreferrer">pub.dev</a>
                        </td>
                        <td data-label="Discussion">N/D</td> </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-elixir-plain"></i></td>
                        <td data-label="Language / Framework">Elixir</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-elixir" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C758AFX0S" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-go-plain"></i></td>
                        <td data-label="Language / Framework">Ir</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-go" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C14LGGCUV" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-java-plain"></i></td>
                        <td data-label="Language / Framework">Java</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-java" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3J5RT3" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-java-plain"></i></td>
                        <td data-label="Language / Framework">Spring Boot</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-springboot-starter" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3J5RT3" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-kotlin-plain"></i></td>
                        <td data-label="Language / Framework">Kotlin</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-kotlin" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C045VU7NXS9" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-javascript-plain"></i></td>
                        <td data-label="Language / Framework">JavaScript</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-js" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1JQQ28P8" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-php-plain"></i></td>
                        <td data-label="Language / Framework">PHP</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-php" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3GTJNM" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-laravel-plain"></i></td>
                        <td data-label="Language / Framework">PHP (Laravel)</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-laravel" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3GTJNM" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-python-plain"></i></td>
                        <td data-label="Language / Framework">Python</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-python" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C13993JDD" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-react-original"></i></td> <td data-label="Language / Framework">React Native</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-react-native" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/CL29QEBPY" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-ruby-plain"></i></td>
                        <td data-label="Language / Framework">Ruby</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-ruby" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C0ZALLH61" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-rust-plain"></i></td>
                        <td data-label="Language / Framework">Ferrugem</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-rust" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C010J616CKV" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-r-plain"></i></td>
                        <td data-label="Language / Framework">R</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/r-dashboard" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C2CR356NR" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-swift-plain"></i></td>
                        <td data-label="Language / Framework">Swift</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-swift" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/CE2A1E7MH" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-csharp-plain"></i></td> <td data-label="Language / Framework">.NET/C#</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-csharp" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1JHT98HJ" target="_blank" rel="noopener noreferrer">Canal do Slack</a></td>
                    </tr>
                </tbody>
            </table>



<script>
    // Ensure the DOM is fully loaded before running scripts
    document.addEventListener('DOMContentLoaded', function() {

        // Initialize Foundation framework components
        $(document).foundation();

        // --- Filtering ---
        const filterInput = document.getElementById('sdkFilter');
        const tableBody = document.getElementById('sdkTableBody');
        // Get live collection of rows - updates automatically if rows are added/removed
        const tableRows = tableBody.getElementsByTagName('tr');

        // Add event listener for input changes (keyup is responsive)
        filterInput.addEventListener('keyup', function() {
            const filterText = filterInput.value.toLowerCase().trim(); // Get filter text, lowercase and trim whitespace

            // Loop through all table rows in the body
            for (let i = 0; i < tableRows.length; i++) {
                const row = tableRows[i];
                // Get all text content from the row's cells
                const rowData = row.textContent || row.innerText;

                // Check if row data includes the filter text
                if (rowData.toLowerCase().indexOf(filterText) > -1) {
                    row.style.display = ""; // Show row if it matches
                } else {
                    row.style.display = "none"; // Hide row if it doesn't match
                }
            }
        });

        // --- Sorting ---
        const table = document.getElementById('sdkTable');
        // Select only headers marked as sortable
        const headers = table.querySelectorAll('th[data-sortable]');
        const tbody = table.querySelector('tbody'); // Reference to the table body

        // Add click event listener to each sortable header
        headers.forEach(header => {
            header.addEventListener('click', () => {
                // Get column index from data attribute (adjusting for 0-based index internally)
                const columnIndex = parseInt(header.dataset.columnIndex, 10);
                // Check current sort direction or default to 'asc' if none
                const currentSortDir = header.dataset.sortDir;
                // Toggle direction: if 'asc', change to 'desc', otherwise change to 'asc'
                const newSortDir = currentSortDir === 'asc' ? 'desc' : 'asc';

                // Remove sort direction attributes from all other headers
                headers.forEach(h => {
                    if (h !== header) {
                        delete h.dataset.sortDir; // Remove attribute to reset arrow style via CSS
                    }
                });

                // Set the new sort direction on the clicked header
                header.dataset.sortDir = newSortDir;

                // Call the sorting function
                sortTable(columnIndex, newSortDir);
            });
        });

        // Function to sort table rows
        function sortTable(columnIndex, direction) {
            // Convert HTMLCollection/NodeList of rows to a standard JavaScript Array
            const rows = Array.from(tbody.querySelectorAll('tr'));

            // Sort the array of rows
            const sortedRows = rows.sort((a, b) => {
                // Get the text content of the cells in the target column for comparison
                // Use textContent for consistency, trim whitespace, convert to lowercase
                const cellA = a.querySelectorAll('td')[columnIndex]?.textContent.trim().toLowerCase() || '';
                const cellB = b.querySelectorAll('td')[columnIndex]?.textContent.trim().toLowerCase() || '';

                // Comparison logic
                if (cellA < cellB) {
                    return direction === 'asc' ? -1 : 1; // If 'asc', A comes first (-1), else B comes first (1)
                }
                if (cellA > cellB) {
                    return direction === 'asc' ? 1 : -1; // If 'asc', B comes first (1), else A comes first (-1)
                }
                return 0; // If equal, order doesn't matter
            });

            // Clear the current rows from the table body
            // While loop is efficient for removing all children
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }

            // Append the sorted rows back into the table body
            // Using spread syntax (...) to append all elements in the array
            tbody.append(...sortedRows);
        }

    }); // End DOMContentLoaded
</script>

<h2 class="emphasized-title">Sobre dados, API e exportações</h2>

<p>Pode consultar <a href="https://support.openfoodfacts.org/help/fr-fr/12">as perguntas frequentes comuns sobre a API e exportações de dados</a> e <a href="https://support.openfoodfacts.org/help/fr-fr">as perguntas frequentes do Open Food Facts</a></p>
<p>Pode <a href="https://slack.openfoodfacts.org">na sala de conversação do Open Food Facts Slack</a> que é a forma preferida de fazer perguntas e discutir sobre a API</a>. Por favor <a href="https://app.slack.com/client/T02KVRT1Q/C043X1X90">coloque as suas questões no canal #api</a></p>
<p>Pode <a href="https://github.com/openfoodfacts/openfoodfacts-server/discussions">abrir um tópico no nosso repositório de documentação da API</a>
<p>Para qualquer dúvida sobre os dados, pode contactar-nos em <a href="mailto:reuse@openfoodfacts.org">reuse@openfoodfacts.org</a>
