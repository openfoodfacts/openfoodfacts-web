<h1 class="emphasized-title">データ</h1>

<h2 class="emphasized-title">再利用の条件</h2>
<p>Open Food Facts データベースは、 <a href="https://opendatacommons.org/licenses/odbl/1.0/">オープン データベース ライセンス</a>に基づいて利用できます。<br/>
データベースの個々のコンテンツは、 <a href="https://opendatacommons.org/licenses/dbcl/1.0/">データベース コンテンツ ライセンス</a>に基づいて利用できます。<br/>
製品画像は、 <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">クリエイティブ コモンズ 表示 - 継承ライセンス</a>に基づいて利用できます。
これらには著作権またはその他の権利の対象となるグラフィック要素が含まれる場合がありますが、場合によっては複製が認められる場合があります（引用権または公正使用）。</p>

<p>データを再利用する前に、 <a href="https://world.openfoodfacts.org/terms-of-use">利用規約と再利用に関する条項</a> をお読みください。</p>


<h2 class="emphasized-title">再利用について教えてください</h2>
<p>私たちは、Open Food Facts データが何に使用されているかを知りたいと思っています。 必須ではありませんが、再利用について <a href="mailto:reuse@openfoodfacts.org?subject=Open%20Food%20Facts%20Data%20reuse">お知らせいただければ</a> 、Open Food Facts コミュニティと共有させていただきます。 また、 <a href="https://forms.gle/hwaeqBfs8ywwhbTg8">このフォームに記入</a> して、アプリが特集されるチャンスを得ることもできます。</p>

<h2 class="emphasized-title">オープンフードファクトデータのエクスポート</h2>

<p>データベースのダンプとエクスポートは毎晩生成されます。 データベースは非常に大きいため、エクスポートのフレーバーに応じて、データのさまざまな使用方法 <a href="https://wiki.openfoodfacts.org/Reusing_Open_Food_Facts_Data"></a>見つけることができます。</p>

<p>MongoDBダンプとCSVエクスポートのさまざまなフィールドに関する情報は、 <a href="https://static.openfoodfacts.org/data/data-fields.txt">https://world.openfoodfacts.org/data/data-fields.txt</a>で入手できます。</p>

<h3>MongoDB ダンプ</h3>

<p>すべての製品のデータは、MongoDB データベース ダンプで入手できます。</p>
<dl>
 <dt>リンク</dt>
 <dd><a href="https://static.openfoodfacts.org/data/openfoodfacts-mongodbdump.gz">https://static.openfoodfacts.org/data/openfoodfacts-mongodbdump.gz</a></dd>
 <dt>sha256sum</dt>
 <dd><a href="https://static.openfoodfacts.org/data/gz-sha256sum">https://static.openfoodfacts.org/data/gz-sha256sum</a></dd>
 <dt>md5sum</dt>
 <dd><a href="https://static.openfoodfacts.org/data/gz-md5sum">https://static.openfoodfacts.org/data/gz-md5sum</a></dd>
</dl>

<h4>デルタエクスポート</h4>

<p>過去 14 日間の毎日のデルタ エクスポートが提供されます。 現在利用可能なデルタファイルのリストは、 <a href="https://static.openfoodfacts.org/data/delta/index.txt">https://static.openfoodfacts.org/data/delta/index.txt</a>にあります。</p>
<p>各行は、 <code>https://static.openfoodfacts.org/data/delta/{filename}</code>で入手できるファイルを表します。</p>
<p>ファイル名には、JSON ファイルに含まれる最初の変更と最後の変更の UNIX タイムスタンプが含まれているため、デルタ ファイルは (抽出後に) <code>mongoimport</code> を使用してアルファベット順にインポートできます。</p>
<p><code>mongoexport</code>の性質上、デルタ ファイルでは削除された製品に関する情報を取得できないことに注意してください。 削除された製品をデータベースから削除するには、MongoDB ダンプ全体をインポートする必要があります。</p>

<h3>JSONLデータのエクスポート</h3>

<p>データベース全体は、各行が JSON オブジェクトである <a href="https://jsonlines.org/">JSONL 形式</a> (LDJSON または NDJSON と呼ばれることもあります) でも利用できます。 これは MongoDB エクスポートと同じデータを表します。 ファイルは gzip で圧縮されています。</p>

<dl>
 <dt>リンク</dt>
 <dd><a href="https://static.openfoodfacts.org/data/openfoodfacts-products.jsonl.gz">https://static.openfoodfacts.org/data/openfoodfacts-products.jsonl.gz</a>
 </dd>
</dl>

<p>データベースを活用する適切な方法は、DuckDBを使用することです。 これは、大量のデータを数秒で処理するために設計されたインプロセス分析ツールです。 DuckDBを使用してOpen Food Factsデータベースを探索および処理する方法について説明した <a href="https://blog.openfoodfacts.org/en/news/food-transparency-in-the-palm-of-your-hand-explore-the-largest-open-food-database-using-duckdb-%f0%9f%a6%86x%f0%9f%8d%8a">ブログ投稿</a> をお読みください。</p>

<h3>Hugging FaceでのParquetデータエクスポート</h3>

<p>JSONL ダンプの簡略化されたバージョンは、 <a href="https://parquet.apache.org/">Parquet 形式</a>でも利用できます。 変換中に、重複した情報を含む列、内部デバッグに使用される列、またはユーザーにとって無関係な列をフィルターしました。</p>
    
<p>Parquet 形式は便利であることが証明されています。</p> 

<ul>
<li>Data is organized by column, rather than by row, which saves storage space and speeds up analytics queries, i.e. you can select just the columns you care about, optimizing query performances, even on entry-level computers.</li>
<li>Highly efficient data compression and decompression, making it good for storing and sharing big datasets of any kind,</li>
<li>Supports complex data types and advanced nested data structures.</li>
</ul>

<p>The dataset is available on <a href="https://huggingface.co/datasets/openfoodfacts/product-database">Hugging Face</a>, a collaborative Machine Learning ecosystem where developers and researchers can share models and datasets.</p>

<dl>
 <dt>リンク</dt>
 <dd><a href="https://huggingface.co/datasets/openfoodfacts/product-database/resolve/main/food.parquet?download=true">https://huggingface.co/datasets/openfoodfacts/product-database/resolve/main/food.parquet?download=true</a>
 </dd>
</dl>

<p>Find more information in the <a href="https://wiki.openfoodfacts.org/Reusing_Open_Food_Facts_Data#Parquet_file_hosted_on_Hugging_Face_.28beta.29">Wiki</a>, including guidelines for data reuse and example queries to get started.</p>

<h3>CSVデータのエクスポート</h3>
<p>すべての製品または一部の製品のデータは、 <a href="https://world.openfoodfacts.org/cgi/search.pl">詳細検索フォーム</a>を通じて CSV 形式 (LibreOffice、Excel、その他の多くのスプレッドシート ソフトウェアで読み取り可能) でダウンロードできます。</p>

<dl>
 <dt>リンク</dt>
 <dd>食品: <a href="https://static.openfoodfacts.org/data/en.openfoodfacts.org.products.csv.gz">https://static.openfoodfacts.org/data/en.openfoodfacts.org.products.csv.gz</a> (GZIP 形式で圧縮された CSV: 約 0.9 Gb、非圧縮: 約 9 Gb)</dd>
 <dd>化粧品: <a href="https://static.openbeautyfacts.org/data/en.openbeautyfacts.org.products.csv.gz">https://static.openbeautyfacts.org/data/en.openbeautyfacts.org.products.csv.gz</a></dd>
 <dd>ペットフード: <a href="https://static.openpetfoodfacts.org/data/en.openpetfoodfacts.org.products.csv.gz">https://static.openpetfoodfacts.org/data/en.openpetfoodfacts.org.products.csv.gz</a></dd>
 <dd>その他すべての製品: <a href="https://static.openproductsfacts.org/data/en.openproductsfacts.org.products.csv.gz">https://static.openproductsfacts.org/data/en.openproductsfacts.org.products.csv.gz</a></dd>
</dl>

<p>ファイルのエンコーディングは Unicode UTF-8 です。 フィールドを区切る文字は &lt;tab&gt; (タブ) です。</p>

<h3>RDFデータのエクスポート</h3>
<p>データベースは RDF 形式でも利用できます (これは実験段階であり、現在は積極的にメンテナンスされていません)。 <a href="https://blog.openfoodfacts.org/fr/news/des-donnees-libres-et-liees-export-rdf-des-donnees">のお知らせはフランス語</a>で読むことができます。</p>

<dl>
 <dt>リンク</dt>
 <dd><a href="https://world.openfoodfacts.org/data/en.openfoodfacts.org.products.rdf.gz">https://world.openfoodfacts.org/data/en.openfoodfacts.org.products.rdf.gz</a></dd>
</dl>

<h3>画像データのエクスポート</h3>
<p>すべての画像と OCR 結果は、当社のサーバーから、または AWS (AWS オープンデータプログラム経由) からダウンロードできます。 
<a href="https://openfoodfacts.github.io/openfoodfacts-server/api/how-to-download-images/" class="button rounded">画像のダウンロード方法の詳細については、ドキュメントをご覧ください</a></p>

<h2 class="emphasized-title">ライブ JSON および XML API</h2>
<p>製品のデータを読み取るための JSON API も利用できます。 この API は特に Open Food Facts モバイル アプリで使用されます。</p>
<p>私たちはAPIの残業を改善しますが、後方互換性を保つように注意しています。 ご使用の場合は、潜在的な変更についてお知らせできるよう、 <a href="mailto:reuse@openfoodfacts.org?subject=Open%20Food%20Facts%20Data%20reuse">ご連絡ください</a> 。</p>
<a href="https://openfoodfacts.github.io/openfoodfacts-server/api/" class="button rounded">APIをご覧ください</a>

<h3 class="emphasized-title">APIとOpenAPIドキュメントの改善に貢献する</h3>
<p>私たちは、API のドキュメントを完成させ、ユースケースを追加し、SDK の生成を自動化したいと考えています。 OpenAPI の専門家であれば、ぜひ協力していただければ幸いです。</p>

<p>1 回の API 呼び出し = ユーザーによる 1 回の実際のスキャンである限り、本番環境で API を自由に使用できます。
完全な毎日のエクスポートがこのページで利用できるため、API を使用してデータベースをスクレイピングする試みはブロックされる可能性が非常に高くなります。</p>
<p>また、API 呼び出しで HTTP ヘッダーを送信すると、問題が発生した場合に連絡を取ることができます。</p>

<h3 class="emphasized-title">XML API（サポートされていません）</h3>
<p><code>.xml</code> を使用して結果を XML で取得することもできます。</p>
<p>例: <a href="https://world.openfoodfacts.org/api/v2/product/737628064502.xml">https://world.openfoodfacts.org/api/v2/product/737628064502.xml</a></p>
この API は積極的にメンテナンスされておらず、公式に文書化されていません。

<h2 class="emphasized-title">ラッパーとSDK</h2>
<p>あなたのお気に入りのプログラミング言語用のラッパーがおそらくあるでしょう。 もしそうなら、それを使用して改善することができます。 もしそうでないなら、あなたがそれを作るのを手伝うことができます。</p>
<p>データの消費だけでなく、ユーザーが新しいデータを投稿できるようにもなります</p>

<h3>ユーザーを満足させるための一般原則</h3>
<ul>
<li>You can search for information about products, including many useful computed values.</li>
<li>If you can't get the information on a specific product, you can get your user to send photos and data, that will then be processed by Open Food Facts AI and contributors to get the computed result you want to show them.</li>
<li>You can also implement the complete flow so that they get immediately the result with some effort on their side.</li>
</ul>

<h3>ユーザーがすぐに結果を期待していない場合（例：在庫管理アプリ）</h3>
<ul>
<li>Submit photos (front/nutrition/ingredients): most painless thing for your users</li>
<li>The Open Food Facts AI - Robotoff - will generate some derived data from the photos</li>
<li>Over time, other apps, and the Open Food Facts community will fill the data gaps</li>
</ul>

<h3>ユーザーがすぐに結果を期待している場合（例：栄養アプリ）</h3>
<ul>
<li>Submit nutrition facts + category &gt; get Nutri-Score</li>
<li>Submit ingredients &gt; get the NOVA group (about food ultra-processing), additives, allergens, normalized ingredients, vegan, vegetarian&hellip;</li>
<li>Submit category + labels &gt; soon get the Eco-Score (about environmental impact)</li>
</ul>

<h3>AndroidおよびiPhoneモバイルアプリ</h3>

<p>Open Food Facts モバイル アプリのコードは、GitHub (<a href="https://github.com/openfoodfacts/smooth-app">Flutter</a>、 <a href="https://github.com/openfoodfacts/openfoodfacts-androidapp">Kotlin Android</a> および <a href="https://github.com/openfoodfacts/openfoodfacts-ios">Swift iOS</a>) で入手できます。</p>

<p>廃止予定の Kotlin および Swift コードベースを Kotlin および Swift SDK に変換する予定ですので、ご協力をお待ちしています :-)</p>
<p><a href="https://github.com/openfoodfacts/openfoodfacts-ios">(<a href="https://github.com/openfoodfacts/smooth-app"></a></a>Android</a> iOS <a href="https://github.com/openfoodfacts/openfoodfacts-androidapp">)。
The app allows users to scan the barcode of products, to view the product information, and to take and submit pictures and data for missing products.</p>
<p>コードを再利用して（オープンソースなので）、地球上のすべての人々のためにコードの改善にご協力ください。</p>

<h3>SDK</h3>
<!-- TODO: Install locally to get icons -->
<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">-->

            <div class="grid-x">
                <div class="cell small-12 medium-6 large-4">
                     <label for="sdkFilter">名前でフィルタリング:</label>
                     <input type="text" id="sdkFilter" placeholder="例: Python、Java、React...">
                </div>
            </div>


            <table class="stack hover" id="sdkTable">
                <thead>
                    <tr>
                        <th width="60">アイコン</th>
                        <th width="200" data-sortable data-column-index="1">言語 / フレームワーク</th>
                        <th>リソース</th>
                        <th data-sortable data-column-index="3">議論</th>
                    </tr>
                </thead>
                <tbody id="sdkTableBody">
                    <tr>
                        <td data-label="Icon"><i class="devicon-cordova-plain"></i></td>
                        <td data-label="Language / Framework">Cordova（旧アプリ）</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-cordova-app" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion">該当なし</td>
                    </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-dart-plain"></i></td>
                        <td data-label="Language / Framework">ダート</td>
                        <td data-label="Resources">
                            <a href="https://github.com/openfoodfacts/openfoodfacts-dart" target="_blank" rel="noopener noreferrer">GitHub</a>
                            <a href="https://pub.dev/packages/openfoodfacts" target="_blank" rel="noopener noreferrer">pub.dev</a>
                        </td>
                        <td data-label="Discussion">該当なし</td> </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-elixir-plain"></i></td>
                        <td data-label="Language / Framework">エリクサー</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-elixir" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C758AFX0S" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-go-plain"></i></td>
                        <td data-label="Language / Framework">行く</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-go" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C14LGGCUV" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-java-plain"></i></td>
                        <td data-label="Language / Framework">ジャワ</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-java" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3J5RT3" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-java-plain"></i></td>
                        <td data-label="Language / Framework">スプリングブート</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-springboot-starter" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3J5RT3" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                    <tr>
                        <td data-label="Icon"><i class="devicon-kotlin-plain"></i></td>
                        <td data-label="Language / Framework">コトリン</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-kotlin" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C045VU7NXS9" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-javascript-plain"></i></td>
                        <td data-label="Language / Framework">JavaScript</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-js" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1JQQ28P8" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-php-plain"></i></td>
                        <td data-label="Language / Framework">PHP</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-php" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3GTJNM" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-laravel-plain"></i></td>
                        <td data-label="Language / Framework">PHP（ララベル）</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-laravel" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1G3GTJNM" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-python-plain"></i></td>
                        <td data-label="Language / Framework">パイソン</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-python" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C13993JDD" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-react-original"></i></td> <td data-label="Language / Framework">リアクトネイティブ</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-react-native" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/CL29QEBPY" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-ruby-plain"></i></td>
                        <td data-label="Language / Framework">ルビー</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-ruby" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C0ZALLH61" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-rust-plain"></i></td>
                        <td data-label="Language / Framework">赤茶色</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-rust" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C010J616CKV" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-r-plain"></i></td>
                        <td data-label="Language / Framework">R</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/r-dashboard" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C2CR356NR" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-swift-plain"></i></td>
                        <td data-label="Language / Framework">迅速</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-swift" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/CE2A1E7MH" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                     <tr>
                        <td data-label="Icon"><i class="devicon-csharp-plain"></i></td> <td data-label="Language / Framework">.NET/C#</td>
                        <td data-label="Resources"><a href="https://github.com/openfoodfacts/openfoodfacts-csharp" target="_blank" rel="noopener noreferrer">GitHub</a></td>
                        <td data-label="Discussion"><a href="https://app.slack.com/client/T02KVRT1Q/C1JHT98HJ" target="_blank" rel="noopener noreferrer">Slackチャンネル</a></td>
                    </tr>
                </tbody>
            </table>



<script>
    // Ensure the DOM is fully loaded before running scripts
    document.addEventListener('DOMContentLoaded', function() {

        // Initialize Foundation framework components
        $(document).foundation();

        // --- Filtering ---
        const filterInput = document.getElementById('sdkFilter');
        const tableBody = document.getElementById('sdkTableBody');
        // Get live collection of rows - updates automatically if rows are added/removed
        const tableRows = tableBody.getElementsByTagName('tr');

        // Add event listener for input changes (keyup is responsive)
        filterInput.addEventListener('keyup', function() {
            const filterText = filterInput.value.toLowerCase().trim(); // Get filter text, lowercase and trim whitespace

            // Loop through all table rows in the body
            for (let i = 0; i < tableRows.length; i++) {
                const row = tableRows[i];
                // Get all text content from the row's cells
                const rowData = row.textContent || row.innerText;

                // Check if row data includes the filter text
                if (rowData.toLowerCase().indexOf(filterText) > -1) {
                    row.style.display = ""; // Show row if it matches
                } else {
                    row.style.display = "none"; // Hide row if it doesn't match
                }
            }
        });

        // --- Sorting ---
        const table = document.getElementById('sdkTable');
        // Select only headers marked as sortable
        const headers = table.querySelectorAll('th[data-sortable]');
        const tbody = table.querySelector('tbody'); // Reference to the table body

        // Add click event listener to each sortable header
        headers.forEach(header => {
            header.addEventListener('click', () => {
                // Get column index from data attribute (adjusting for 0-based index internally)
                const columnIndex = parseInt(header.dataset.columnIndex, 10);
                // Check current sort direction or default to 'asc' if none
                const currentSortDir = header.dataset.sortDir;
                // Toggle direction: if 'asc', change to 'desc', otherwise change to 'asc'
                const newSortDir = currentSortDir === 'asc' ? 'desc' : 'asc';

                // Remove sort direction attributes from all other headers
                headers.forEach(h => {
                    if (h !== header) {
                        delete h.dataset.sortDir; // Remove attribute to reset arrow style via CSS
                    }
                });

                // Set the new sort direction on the clicked header
                header.dataset.sortDir = newSortDir;

                // Call the sorting function
                sortTable(columnIndex, newSortDir);
            });
        });

        // Function to sort table rows
        function sortTable(columnIndex, direction) {
            // Convert HTMLCollection/NodeList of rows to a standard JavaScript Array
            const rows = Array.from(tbody.querySelectorAll('tr'));

            // Sort the array of rows
            const sortedRows = rows.sort((a, b) => {
                // Get the text content of the cells in the target column for comparison
                // Use textContent for consistency, trim whitespace, convert to lowercase
                const cellA = a.querySelectorAll('td')[columnIndex]?.textContent.trim().toLowerCase() || '';
                const cellB = b.querySelectorAll('td')[columnIndex]?.textContent.trim().toLowerCase() || '';

                // Comparison logic
                if (cellA < cellB) {
                    return direction === 'asc' ? -1 : 1; // If 'asc', A comes first (-1), else B comes first (1)
                }
                if (cellA > cellB) {
                    return direction === 'asc' ? 1 : -1; // If 'asc', B comes first (1), else A comes first (-1)
                }
                return 0; // If equal, order doesn't matter
            });

            // Clear the current rows from the table body
            // While loop is efficient for removing all children
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }

            // Append the sorted rows back into the table body
            // Using spread syntax (...) to append all elements in the array
            tbody.append(...sortedRows);
        }

    }); // End DOMContentLoaded
</script>

<h2 class="emphasized-title">データ、API、エクスポートについて議論する</h2>

<p><a href="https://support.openfoodfacts.org/help/fr-fr/12">APIとデータエクスポートに関するよくある質問</a> と <a href="https://support.openfoodfacts.org/help/fr-fr">Open Food Factsに関するよくある質問</a>をご覧ください。</p>
<p><a href="https://slack.openfoodfacts.org">Open Food Facts Slack チャットルーム</a> に参加できます。これは、質問したり API について話し合ったりするための推奨される方法です</a>。 <a href="https://app.slack.com/client/T02KVRT1Q/C043X1X90">ご質問は #api チャンネル</a>までお寄せください</p>
<p><a href="https://github.com/openfoodfacts/openfoodfacts-server/discussions">APIドキュメントリポジトリでスレッドを開くことができます</a>
<p>データに関するご質問は、 <a href="mailto:reuse@openfoodfacts.org">reuse@openfoodfacts.org</a>までお問い合わせください。
